import matplotlib.pyplot as plt
import geopandas as gpd
import numpy as np

# mainly for poi data

# path of areas shapefile data
# nyc: '/home/zh/raw_data/New_York/region/taxi_zones/geo_export_4307250c-7101-4b26-9c11-acc7be44d297.shp'
# chicago: '/home/zh/raw_data/Chicago/region/chicago_Boundaries_Community_Areas/geo_export_4c5e5141-cac3-4432-91ed-98a5fc4a3138.shp'
# LA: '/home/zh/raw_data/Los_Angeles/region/Los_Angeles_Council_District_Boundaries/geo_export_ee48f79f-ef0a-4515-a620-1d0075f71a45.shp'
areas_path = '/home/zh/raw_data/New_York/region/taxi_zones/geo_export_4307250c-7101-4b26-9c11-acc7be44d297.shp'

data_counts_path = '/home/zh/crime_prediction_data/nyc/poi_counts/poi_counts_2020.npy'


areas = gpd.read_file(areas_path)
data_counts = np.load(data_counts_path)

# pred 1
# data_counts = np.array([ 0,  0,  2,  3,  1,  2, 11,  0,  2,  0,  5,  3,  0,  1,  6,  4,  6,
#         1,  5,  2,  4, 13,  2,  5,  3,  3,  0,  5,  3,  4,  1,  4,  1,  1,
#        13,  8, 11,  3,  9,  2,  9,  3,  0, 14,  2,  2,  6,  6,  6,  2,  2,
#         0,  4,  0,  7,  2,  0,  1,  1,  6, 18,  5,  7,  1,  4,  5,  2,  2,
#         6,  0,  8,  3,  6,  5,  5, 14,  4,  7, 10, 20,  6,  9,  4,  1,  9,
#         2,  1,  0, 11,  5,  0,  6,  8,  0,  6,  4,  0,  7,  2,  4,  7,  2,
#         3,  0,  0,  0,  2,  5,  4,  2,  0,  0,  4,  2,  3,  1,  8,  6,  3,
#         6,  0,  1,  2,  3,  2,  3,  4,  8,  5,  1, 10,  0,  4, 11,  2,  2,
#         0,  1,  1,  3,  3,  4,  2,  3,  5,  0,  4,  2,  3,  2,  2,  3,  2,
#         0,  3,  4, 10,  3,  2,  3,  2,  3,  1,  3,  2,  3,  5,  9,  1, 14,
#         7,  1,  2,  7,  7,  1,  3,  2,  7,  4,  7,  3,  1,  1,  4,  4,  2,
#         1,  3,  9,  6,  1,  4,  2,  1,  1,  2,  7, 10,  1,  6,  9,  2,  0,
#         3,  0,  5,  6,  0,  6,  2,  3,  2,  4,  5,  9,  2,  4,  3, 11,  6,
#         1,  5,  5,  1,  4,  6,  7,  0,  4,  5,  3,  6,  1,  3, 10,  4,  4,
#         6,  3,  5,  4,  5,  1,  2,  6,  9,  0,  2,  8,  4,  5,  1,  4,  3,
#         2, 10,  3,  3,  6,  2,  3,  3])

# ground truth 1
# data_counts = np.array([ 0,  0,  3,  7,  0,  1, 14,  0,  0,  4,  5,  2,  0,  0,  9,  2,  6,
#         1,  7,  5,  0, 12,  1,  6,  7, 12,  0,  3,  2,  3,  0,  3,  1,  0,
#        12,  6,  7,  4,  8,  2, 22,  1,  1, 10,  1,  1,  4, 12,  5,  2,  6,
#         0,  2,  1, 10,  6,  0,  0,  0,  8, 19,  5, 13,  1,  3, 11,  0,  7,
#         6,  0, 12,  3,  2,  3,  6, 15,  5, 15, 14, 14,  8,  4,  6,  2,  6,
#         1,  1,  0,  6,  5,  1,  3,  9,  1,  3,  7,  1,  7,  4,  1,  7,  1,
#         2,  0,  0,  0,  4,  2,  3,  4,  0,  0,  5,  1,  0,  3, 10,  5,  4,
#         8,  0,  1,  0,  5,  2,  6,  2,  8,  8,  0, 16,  2,  5,  8,  4,  1,
#         0,  4,  1,  2,  6,  4,  5,  2,  4,  0,  8,  1,  2,  3,  2,  2,  0,
#         0,  7,  8, 18,  3,  1,  4,  2,  6,  1,  3, 11,  3,  5,  7,  0, 13,
#        13,  2,  1,  3,  4,  1,  0,  0, 12,  3,  3,  2,  0,  2,  0,  6,  4,
#         2,  5,  8,  6,  1,  3,  2,  0,  4,  1,  7, 11,  2,  4,  9,  0,  2,
#         3,  0,  2,  7,  0, 13,  2,  6,  3,  0,  8,  9,  2,  7,  3, 12,  2,
#         0,  7,  2,  1,  4,  3,  5,  3,  0, 14,  3, 16,  1,  4,  7,  8,  4,
#         5,  2,  6,  4,  7,  3,  4,  9, 16,  0,  2, 11,  8,  9,  0,  2,  4,
#         2, 11,  2,  5,  7,  1,  0,  1])

# pred 2
# data_counts = np.array([ 0,  0,  2,  3,  1,  3, 10,  0,  2,  0,  5,  3,  0,  1,  7,  3,  6,
#         1,  5,  3,  3, 14,  1,  5,  3,  4,  0,  5,  2,  3,  0,  3,  1,  1,
#        13,  7, 11,  3,  8,  2,  9,  3,  0, 13,  1,  2,  6,  6,  6,  2,  2,
#         0,  4,  0,  6,  2,  0,  1,  1,  6, 18,  4,  6,  1,  4,  4,  1,  2,
#         5,  0,  8,  3,  5,  5,  5, 12,  4,  8,  9, 18,  6,  9,  3,  1,  8,
#         1,  1,  1, 11,  5,  0,  6,  8, -1,  5,  4,  0,  6,  2,  3,  6,  2,
#         2,  0,  0,  0,  1,  5,  4,  3,  0,  0,  4,  1,  3,  1,  8,  5,  2,
#         6,  0,  2,  2,  3,  2,  4,  3,  6,  4,  0, 10,  0,  4, 10,  3,  2,
#         0,  2,  1,  4,  4,  3,  3,  3,  5,  0,  4,  2,  3,  2,  3,  4,  2,
#         0,  2,  4, 10,  3,  2,  3,  1,  3,  1,  3,  1,  2,  4,  9,  1, 13,
#         8,  2,  2,  5,  7,  1,  3,  2,  7,  3,  6,  3,  1,  1,  4,  4,  2,
#         2,  4,  8,  5,  1,  3,  1,  1,  1,  2,  6, 10,  1,  6,  9,  2,  0,
#         2,  0,  6,  5,  0,  5,  2,  3,  2,  4,  5,  8,  2,  4,  2, 10,  5,
#         1,  5,  5,  1,  3,  5,  7,  0,  4,  5,  3,  6,  1,  3, 10,  3,  4,
#         5,  3,  5,  4,  5,  1,  3,  7, 10,  0,  1,  7,  4,  4,  1,  3,  2,
#         2, 10,  3,  3,  6,  3,  2,  3])

# ground truth 2
# data_counts = np.array([ 0,  0,  2,  2,  1,  2, 14,  0,  1,  2,  4,  1,  0,  0, 14,  4,  8,
#         0,  8,  3,  1, 10,  0,  3,  7,  2,  0,  6,  2,  4,  2,  2,  1,  0,
#        14,  7, 10,  1,  9,  4, 12,  2,  0, 12,  0,  1,  6, 12,  5,  1,  1,
#         0,  1,  0,  6,  4,  0,  0,  0,  6, 14,  3,  7,  1,  6, 12,  0,  0,
#        10,  2,  6,  5,  1,  5,  3, 15,  4,  8, 10, 17,  6,  8,  7,  0, 10,
#         0,  0,  1,  4,  4,  0,  4,  9,  0,  8,  3,  0, 11,  1,  0,  7,  2,
#         2,  0,  0,  0,  0,  3,  1,  4,  0,  0,  1,  5,  1,  3, 10,  6,  7,
#         1,  0,  4,  1,  7,  1,  5,  2,  6,  4,  0,  7,  1,  2,  9,  0,  3,
#         0,  1,  2,  3,  5,  7,  7,  3,  3,  0,  2,  2,  1,  7,  3,  8,  2,
#         0,  3, 10, 12,  3,  1,  4,  1,  2,  2,  2,  2,  3,  6,  8,  0,  9,
#         6,  3,  2,  8,  3,  2,  5,  3,  7,  2,  4,  7,  1,  0,  5,  4,  6,
#         1,  4,  8,  3,  1,  4,  0,  0,  6,  4,  5, 10,  0,  6,  6,  2,  2,
#         1,  0,  4,  3,  0,  2,  1,  2,  1,  2,  7, 11,  1,  1,  3, 15,  8,
#         0,  5, 16,  2,  7,  8,  8,  2,  3,  1, 20,  8,  4, 10,  8,  3,  3,
#         7,  0,  3,  7,  4,  0,  8,  5,  8,  0,  1,  7,  4,  7,  0,  5,  1,
#         4, 12,  2,  6,  3,  5,  0,  2])

d = {'data_count': data_counts, 'geometry': areas.geometry}
gdf = gpd.GeoDataFrame(d, crs="EPSG:4326")
base = areas.plot(color='white', edgecolor='black', alpha=0.3)
gdf.plot(column='data_count', ax = base, alpha = 0.5, cmap='OrRd', legend=False)
plt.axis('off')
plt.savefig('/home/zh/Pictures/poi.svg')
plt.show()